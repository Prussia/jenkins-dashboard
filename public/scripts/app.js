"use strict";function ContentController(n,t,r){var o=this;o.jobList=[],o.init=function(){e()};var e=function(){return n.get("app/data/job.data.json").then(function(n){r.log(n),o.jobList=[],_.forEach(n.data.jobs,function(n){if(n.builds[0]&&"disabled"!==n.color){var t={displayName:n.displayName,projectName:n.projectName,environment:n.environment,timestamp:n.builds[0].timestamp,build:n.builds[0],lastTriggerName:n.builds[0].culprits[0].fullName,color:n.color};o.jobList.push(t)}}),o.jobList=_.sortBy(o.jobList,"timestamp")},function(n){r.error("Get Jenkins data error!")}),!0}}function utilService(n,t,r,o,e,i,a,l){var s={ajax:function(r,o,a,l){i.showLoading=!0,n.when(t(r)).then(function(n){e.log(n.config.method+", url: "+n.config.url),e.log(n);var t=n.data;return"FAILED"===t.status?(e.log("Failed: "+t.messageBean.message),void(angular.isFunction(a)&&a(t))):(angular.isFunction(o)&&o(t),void e.log("Success: "+angular.toJson(t.data)))},function(n){angular.isFunction(a)&&a(n),e.log("Error: "+angular.toJson(n))})["finally"](function(n){angular.isFunction(l)&&l(n),i.showLoading=!1,e.log("Always done: "+angular.toJson(n))})},showGlobalLoadingBox:function(){i.showLoading=!0},hideGlobalLoadingBox:function(){i.showLoading=!1},go:function(n){r.go(n)},checkSession:function(){var n=a.get(l.LOGGED_IN_USER),t=angular.isDefined(n)&&null!==n;return i.isSecured=t,t},clearSession:function(){e.log("clearSession"),a.clearAll()},setLeftSidebarMenus:function(n){a.set(l.LEFT_SIDEBAR_MENUS,n)},getLeftSidebarMenus:function(){return a.get(l.LEFT_SIDEBAR_MENUS)},apiHost:function(){var n=o.location,t=n.origin;return"http://localhost:3000"===t&&(t="http://localhost:9052"),t},isEmptyString:function(n){return angular.isUndefined(n)||null===n||/^\s*$/.test(n)},moreFunc:function(){e.log("call test from util...")}};return s}function routesConfig(n,t,r){n.state("content",{url:"/content",templateUrl:"app/content/content.html",controller:"ContentController",controllerAs:"content"}),t.otherwise("/content")}ContentController.$inject=["$http","$timeout","$log"],routesConfig.$inject=["$stateProvider","$urlRouterProvider","$locationProvider"],utilService.$inject=["$q","$http","$state","$window","$log","$rootScope","localStorageService","APP_CONST"],angular.module("dashboardApp",["ui.router","LocalStorageModule","ngIdle","angular-click-outside","ngCookies","angular.filter","tableSort","ngSanitize"]).value("credentials",{}).constant("APP_CONST",{APP_NAME:"Analytics app - CI dashboard",WS_API:"/api",LOGGED_IN_USER:"loggedInUser"}).config(["localStorageServiceProvider","IdleProvider","KeepaliveProvider","TitleProvider",function(n,t,r,o){n.setStorageType("sessionStorage").setPrefix("rpm"),t.idle(2700),t.timeout(5),r.interval(2),o.enabled(!1)}]).controller("AppController",["$scope","$rootScope","$timeout","$log","$window","Idle","utilService",function(n,t,r,o,e,i,a){function l(n){o.log("checkSecurity called...");var t=e.location.hash;if("#/content"===t)return void i.unwatch();var l=a.checkSession();return l?void 0:(n&&n.preventDefault(),void r(function(){a.clearSession(),i.unwatch(),e.location.hash="#/content"},100))}var s=this;o.log("%c RPM-Prod-v2.0.0 ","background: #fff; border: 1px solid #d04a02; color: #d04a02"),o.log("AppController is running..."),s.init=function(){o.log("Initialized...")};var c=t.$on("$stateChangeStart",function(n,t){o.log("locationChangeStart: "+e.location),t.name.indexOf("disclaimer")===-1&&l(n)});n.$on("IdleTimeout",function(){o.log("Your session has expired..."),i.unwatch(),a.clearSession(),a.go("content")}),n.$on("$destroy",function(){c()}),l(),i.watch()}]),angular.module("dashboardApp").component("appHeader",{templateUrl:"app/components/header/header.html",bindings:{$router:"<"},controller:"HeaderController"}).controller("HeaderController",["$log","localStorageService","utilService","Idle","APP_CONST",function(n,t,r,o,e){var i=this;i.user=t.get(e.LOGGED_IN_USER),i.$log=n,i.appName=e.APP_NAME,i.currentTabIndex=0,i.isSelectLanguage=!1,i.isUserSetting=!1,i.getHighlightedTab=function(n){return i.currentTabIndex===n?"active":""},i.switchPage=function(n){i.currentTabIndex=n},i.userSettingToggle=function(){i.isUserSetting=!i.isUserSetting},i.hideUserSettingDpdwn=function(){i.isUserSetting=!1},i.logout=function(){r.ajax({method:"get",url:e.WS_API+"/logout"},function(){o.watch()},function(){},function(){t.clearAll(),r.go("logout")})},i.gotoLogin=function(){r.go("content")}}]),angular.module("dashboardApp").component("appFooter",{templateUrl:"app/components/footer/footer.html",bindings:{$router:"<"},controller:"FooterController"}).controller("FooterController",["utilService",function(n){var t=this;t.currentYear=(new Date).getFullYear(),t.gotoDisclaimer=function(t){n.go(t)}}]),angular.module("dashboardApp").controller("ContentController",ContentController),angular.module("dashboardApp").factory("utilService",utilService),angular.module("dashboardApp").run(["$templateCache",function(n){n.put("app/content/content.html",'<app-header></app-header>\r\n<div class="whole-container">\r\n    <div class="content-container row" ng-init="content.init()">\r\n        <table class="table table-bordered">\r\n            <thead>\r\n                <tr class="header1">\r\n                    <th rowspan="2">Project</th>\r\n                    <th rowspan="2">Environment</th>\r\n                    <th colspan="3">Lastest Build</th>\r\n                    <th colspan="2">Sonar Scan</th>\r\n                    <th colspan="2">Unit Test</th>\r\n                    <th colspan="2">Automation Test</th>\r\n                </tr>\r\n                <tr class="header2">\r\n                    <th>Status</th>\r\n                    <th>Timestamp</th>\r\n                    <th>Trigger</th>\r\n                    <th>Bugs</th>\r\n                    <th>Line of Code</th>\r\n                    <th>Pass/Failed</th>\r\n                    <th>Coverage</th>\r\n                    <th>AT1</th>\r\n                    <th>AT2</th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                <tr ng-repeat="job in content.jobList" class="job">\r\n                    <td>{{job.projectName}}</td>\r\n                    <td>{{job.environment}}</td>\r\n                    <td class="status-td"><span class="status {{job.color}}"></span></td>\r\n                    <td>{{job.timestamp | date: \'yyyy-MM-dd HH:mm:ss\'}}</td>\r\n                    <td>{{job.lastTriggerName}}</td>\r\n                    <td>1</td>\r\n                    <td>23432</td>\r\n                    <td>32/35</td>\r\n                    <td>37%</td>\r\n                    <td>21</td>\r\n                    <td>23</td>\r\n                </tr>\r\n            </tbody>\r\n        </table>\r\n    </div>\r\n    <app-footer></app-footer>\r\n</div>\r\n\r\n'),n.put("app/components/footer/footer.html",'<div class="footer" ng-controller="FooterController as footer">\r\n    <div class="foot-left ng-binding">Â© {{footer.currentYear}} PwC. All rights reserved. PwC refers to the US member firm of the PwC network or one of its subsidiaries or affiliates.\r\n    </div>\r\n</div>\r\n'),n.put("app/components/header/header.html",'<nav class="navbar navbar-static-top ng-scope">\r\n    <div class="top-bar">\r\n        <div class="pull-left logo-box" ng-click="$ctrl.turnToHomePage()">\r\n            <img class="logo" src="assets/images/logo.png"></div>\r\n        <div class="app-name pull-left ng-binding" ui-sref="dash.landing">{{$ctrl.appName}}</div>\r\n        <div class="logout-container pull-right border-left" ng-if="$ctrl.user" ng-click="$ctrl.userSettingToggle()" click-outside="$ctrl.hideUserSettingDpdwn()">\r\n            <div class="user-name ng-binding">{{$ctrl.user.firstName | uppercase | limitTo:1}}{{$ctrl.user.lastName | uppercase | limitTo:1}}</div>\r\n        </div>\r\n        <!-- <div class="login-btn pull-right" ng-if="!$ctrl.user">\r\n            <button class="button" ng-click="$ctrl.gotoLogin()">Login</button>\r\n        </div> -->\r\n        <div class="pull-right border-left topbar-padding" ng-if="$ctrl.user">\r\n            <i class="appkiticon icon-outline-notification"></i>\r\n        </div>\r\n        <div class="pull-right border-left" ng-if="$ctrl.user">\r\n            <form>\r\n                <div class="dropdown dropdown-sample dropdown-default">\r\n                    <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">Language</button>\r\n                    <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">\r\n                        <li><a>English</a></li>\r\n                        <li><a>Chinese</a></li>\r\n                        <li><a>Indian</a></li>\r\n                    </ul>\r\n                    <i class="appkiticon icon-fill-down-chevron" data-toggle="dropdown"></i>\r\n                </div>\r\n            </form>\r\n        </div>\r\n        <div class="userSettingList ng-hide" ng-show="$ctrl.isUserSetting">\r\n            <ul>\r\n                <li>\r\n                    <div class="userDetails">\r\n                        <div class="user-image">{{$ctrl.user.firstName | uppercase | limitTo:1}}{{$ctrl.user.lastName | uppercase | limitTo:1}}</div>\r\n                        <div class="user-name">\r\n                            <p class="name">{{$ctrl.user.firstName}} {{$ctrl.user.lastName}}</p>\r\n                        </div>\r\n                    </div>\r\n                </li>\r\n                <li ng-click="$ctrl.logout()">\r\n                    <i class="appkiticon icon-fill-logout logout-svg"></i>Logout\r\n                </li>\r\n            </ul>\r\n        </div>\r\n    </div>\r\n    <div class="breadcrum-part container ng-hide" ng-show="$root.subMenu && $root.subMenu.length > 0">\r\n        <ul class="breadcrumb paddingTB0">\r\n            <li>\r\n                <a href="/analyst/landing" ui-sref="analystLanding">\r\n                    <svg width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="breadcrumb-home-svg">\r\n                        <g id="Fill-v2" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\r\n                            <g id="Add-User" fill="#231F1F">\r\n                                <polygon id="Page-1" points="12 1.99985 0 13.99985 3.5145 13.99985 3.5145 22.48535 20.484 22.48535 20.484 13.99985 24 13.99985"></polygon>\r\n                            </g>\r\n                        </g>\r\n                    </svg>\r\n                </a>\r\n                <span class="divider"></span>\r\n            </li>\r\n            <!-- ngRepeat: subMenu in $root.subMenu track by $index -->\r\n        </ul>\r\n    </div>\r\n</nav>\r\n')}]),angular.module("dashboardApp").config(routesConfig),angular.module("dashboardApp").filter("linebreak",function(){return function(n){return/\n/.test(n)?n.replace(/\n/g,"<br>"):n}}).filter("to_trusted",["$sce",function(n){return function(t){return n.trustAsHtml(t)}}]);
//# sourceMappingURL=../maps/scripts/app.js.map
